<style type='text/css'>
  /* Set search bar's height to 64px. Otherwise, the UI breaks,
    it is a bug in materlize-css.*/
  input[type='search'] {
    height: 64px !important;
  }
  /* Sticky column interface / API column. */
  .colhead {
    position: absolute;
    left: auto;
    top: auto;
    background-color: rgba(255, 255, 255, 0.5);
  }
</style>
<div class='card-panel'>
  <nav class='blue lighten-3'>
    <div class='nav-wrapper'>
      <ul class='left'>
        <li>
          <form>
            <div class='input-field'>
              <input id='search' type='search' ng-model='searchKey'
                ng-keyup='$event.keyCode == 13 && search($event)'>
              <label class='label-icon' for='search'>
                <i class='material-icons'>search</i>
              </label>
              <i class='material-icons'>close</i>
            </div>
          </form>
        </li>
      </ul>
      <ul class='right'>
        <li class="switch">
          <label class='white-text'>
            Expand All
            <input type="checkbox" ng-model='expandAll'>
            <span class="lever"></span>
          </label>
        </li>
        <!-- Pagination -->
        <li class='waves-effect' ng-class='{disabled: currentPage === 0}'
          ng-click='setPage(currentPage-1)'
          ng-disabled='currentPage === 0'>
          <i class='material-icons'>chevron_left</i>
        </li>
        <li class='waves-effect' ng-class='{active: n === currentPage}'
          ng-repeat='n in range(pageLength, currentPage)'>
            <a ng-click='setPage(n)'>{{n + 1}}</a>
        </li>
        <li class='waves-effect' ng-class='{disabled: (currentPage) === pageLength - 1}'
           ng-click='setPage(currentPage+1)' ng-disabled='currentPage === pageLength - 1'>
           <i class='material-icons'>chevron_right</i>
        </li>
        <!-- Download CSV button -->
        <li><a ng-click='downloadCSV()'>
          Download CSV<i class='material-icons right'>file_download</i>
        </a></li>
      </ul>
    </div>
  </nav>

  <div style='overflow: scroll;width: 100%;'>
    <table class='bordered highlight'>
      <tr>
        <th>Interface / API</th>
        <th ng-repeat='browser in $ctrl.browserKeys'>
          <div class='chip'>
            {{browser}}
            <i class='material-icons close'
              ng-if='$ctrl.ableToDeleteBrowser'
              ng-click='removeBrowser($event, browser)'>
                close
            </i>
          </div>
        </th>
      </tr>
      <tr ng-repeat-start='interface in getInterfaceRange()' ng-click='showCatalog(interface)'>
        <td class='waves-effect'
          ng-class='{"grey lighten-1": showRows[interface] || expandAll}'
          ng-style='{cursor:"pointer", width:"100%"}'>{{interface}}</td>
      </tr>
      <tr ng-repeat-end ng-repeat='(api, results) in apiCatalogMatrix[interface]' ng-if='showRows[interface] || expandAll'>
        <td class='colhead'>{{api}}</td>
        <td ng-repeat='browser in $ctrl.browserKeys'
          ng-class='{"red accent-1": !results[browser], "green accent-1": results[browser]}'>
          <i class='material-icons' ng-if='results[browser]'>check</i>
          <i class='material-icons' ng-if='!results[browser]'>close</i>
        </td>
      </tr>
    </table>
  </div>
</div>
